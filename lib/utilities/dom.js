"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.elementsFromDOMElements = elementsFromDOMElements;
exports.ascendantDOMNodesFromDOMNode = ascendantDOMNodesFromDOMNode;
exports.descendantDOMNodesFromDOMNode = descendantDOMNodesFromDOMNode;
exports.filterDOMNodesBySelector = filterDOMNodesBySelector;
exports.domNodeMatchesSelector = domNodeMatchesSelector;
exports.filterDOMNodes = filterDOMNodes;
var _array = require("../utilities/array");
var _constants = require("../constants");
function elementsFromDOMElements(domElements) {
    var domElementsWithElements = filterDOMNodes(domElements, function(domElement) {
        return domElement.__element__ !== undefined;
    }), elements = domElementsWithElements.map(function(domElement) {
        return domElement.__element__;
    });
    return elements;
}
function ascendantDOMNodesFromDOMNode(domNode, height) {
    var ascendantDOMNodes = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
    if (height > 0) {
        var parentDOMNode = domNode.parentElement; ///
        if (parentDOMNode !== null) {
            ascendantDOMNodes.push(parentDOMNode);
            height--;
            ascendantDOMNodesFromDOMNode(parentDOMNode, height, ascendantDOMNodes);
        }
    }
    return ascendantDOMNodes;
}
function descendantDOMNodesFromDOMNode(domNode, depth) {
    var descendantDOMNodes = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : [];
    if (depth > 0) {
        var childDOMNodes = domNode.childNodes; ///
        (0, _array).push(descendantDOMNodes, childDOMNodes);
        depth--;
        childDOMNodes.forEach(function(childDOMNode) {
            return descendantDOMNodesFromDOMNode(childDOMNode, depth, descendantDOMNodes);
        });
    }
    return descendantDOMNodes;
}
function filterDOMNodesBySelector(domNodes, selector) {
    var filteredDOMNodes = filterDOMNodes(domNodes, function(domNode) {
        return domNodeMatchesSelector(domNode, selector);
    });
    return filteredDOMNodes;
}
function domNodeMatchesSelector(domNode, selector) {
    var domNodeType = domNode.nodeType;
    switch(domNodeType){
        case Node.ELEMENT_NODE:
            {
                var domElement = domNode; ///
                return domElement.matches(selector);
            }
        case Node.TEXT_NODE:
            {
                if (selector === _constants.WILDCARD) {
                    return true;
                }
            }
    }
    return false;
}
function filterDOMNodes(domNodes, test) {
    var filteredDOMNodes = [], domNodesLength = domNodes.length;
    for(var index = 0; index < domNodesLength; index++){
        var domNode = domNodes[index], result = test(domNode);
        if (result) {
            filteredDOMNodes.push(domNode);
        }
    }
    return filteredDOMNodes;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvZG9tLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBwdXNoIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9hcnJheVwiO1xuaW1wb3J0IHsgV0lMRENBUkQgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50c0Zyb21ET01FbGVtZW50cyhkb21FbGVtZW50cykge1xuICBjb25zdCBkb21FbGVtZW50c1dpdGhFbGVtZW50cyA9IGZpbHRlckRPTU5vZGVzKGRvbUVsZW1lbnRzLCAoZG9tRWxlbWVudCkgPT4gKGRvbUVsZW1lbnQuX19lbGVtZW50X18gIT09IHVuZGVmaW5lZCkpLFxuICAgICAgICBlbGVtZW50cyA9IGRvbUVsZW1lbnRzV2l0aEVsZW1lbnRzLm1hcCgoZG9tRWxlbWVudCkgPT4gZG9tRWxlbWVudC5fX2VsZW1lbnRfXyk7XG5cbiAgcmV0dXJuIGVsZW1lbnRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNjZW5kYW50RE9NTm9kZXNGcm9tRE9NTm9kZShkb21Ob2RlLCBoZWlnaHQsIGFzY2VuZGFudERPTU5vZGVzID0gW10pIHtcbiAgaWYgKGhlaWdodCA+IDApIHtcbiAgICBjb25zdCBwYXJlbnRET01Ob2RlID0gZG9tTm9kZS5wYXJlbnRFbGVtZW50OyAgLy8vXG5cbiAgICBpZiAocGFyZW50RE9NTm9kZSAhPT0gbnVsbCkge1xuICAgICAgYXNjZW5kYW50RE9NTm9kZXMucHVzaChwYXJlbnRET01Ob2RlKTtcblxuICAgICAgaGVpZ2h0LS07XG5cbiAgICAgIGFzY2VuZGFudERPTU5vZGVzRnJvbURPTU5vZGUocGFyZW50RE9NTm9kZSwgaGVpZ2h0LCBhc2NlbmRhbnRET01Ob2Rlcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFzY2VuZGFudERPTU5vZGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzY2VuZGFudERPTU5vZGVzRnJvbURPTU5vZGUoZG9tTm9kZSwgZGVwdGgsIGRlc2NlbmRhbnRET01Ob2RlcyA9IFtdKSB7XG4gIGlmIChkZXB0aCA+IDApIHtcbiAgICBjb25zdCBjaGlsZERPTU5vZGVzID0gZG9tTm9kZS5jaGlsZE5vZGVzOyAgLy8vXG5cbiAgICBwdXNoKGRlc2NlbmRhbnRET01Ob2RlcywgY2hpbGRET01Ob2Rlcyk7XG5cbiAgICBkZXB0aC0tO1xuXG4gICAgY2hpbGRET01Ob2Rlcy5mb3JFYWNoKChjaGlsZERPTU5vZGUpID0+IGRlc2NlbmRhbnRET01Ob2Rlc0Zyb21ET01Ob2RlKGNoaWxkRE9NTm9kZSwgZGVwdGgsIGRlc2NlbmRhbnRET01Ob2RlcykpO1xuICB9XG5cbiAgcmV0dXJuIGRlc2NlbmRhbnRET01Ob2Rlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckRPTU5vZGVzQnlTZWxlY3Rvcihkb21Ob2Rlcywgc2VsZWN0b3IpIHtcbiAgY29uc3QgZmlsdGVyZWRET01Ob2RlcyA9IGZpbHRlckRPTU5vZGVzKGRvbU5vZGVzLCAoZG9tTm9kZSkgPT4gZG9tTm9kZU1hdGNoZXNTZWxlY3Rvcihkb21Ob2RlLCBzZWxlY3RvcikpO1xuXG4gIHJldHVybiBmaWx0ZXJlZERPTU5vZGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZG9tTm9kZU1hdGNoZXNTZWxlY3Rvcihkb21Ob2RlLCBzZWxlY3Rvcikge1xuICBjb25zdCBkb21Ob2RlVHlwZSA9IGRvbU5vZGUubm9kZVR5cGU7XG5cbiAgc3dpdGNoIChkb21Ob2RlVHlwZSkge1xuICAgIGNhc2UgTm9kZS5FTEVNRU5UX05PREU6IHtcbiAgICAgIGNvbnN0IGRvbUVsZW1lbnQgPSBkb21Ob2RlOyAvLy9cblxuICAgICAgcmV0dXJuIGRvbUVsZW1lbnQubWF0Y2hlcyhzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgY2FzZSBOb2RlLlRFWFRfTk9ERToge1xuICAgICAgaWYgKHNlbGVjdG9yID09PSBXSUxEQ0FSRCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJET01Ob2Rlcyhkb21Ob2RlcywgdGVzdCkge1xuICBjb25zdCBmaWx0ZXJlZERPTU5vZGVzID0gW10sXG4gICAgICAgIGRvbU5vZGVzTGVuZ3RoID0gZG9tTm9kZXMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkb21Ob2Rlc0xlbmd0aDsgaW5kZXgrKykge1xuICAgIGNvbnN0IGRvbU5vZGUgPSBkb21Ob2Rlc1tpbmRleF0sXG4gICAgICAgICAgcmVzdWx0ID0gdGVzdChkb21Ob2RlKTtcblxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGZpbHRlcmVkRE9NTm9kZXMucHVzaChkb21Ob2RlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmlsdGVyZWRET01Ob2Rlcztcbn1cbiJdLCJuYW1lcyI6WyJlbGVtZW50c0Zyb21ET01FbGVtZW50cyIsImFzY2VuZGFudERPTU5vZGVzRnJvbURPTU5vZGUiLCJkZXNjZW5kYW50RE9NTm9kZXNGcm9tRE9NTm9kZSIsImZpbHRlckRPTU5vZGVzQnlTZWxlY3RvciIsImRvbU5vZGVNYXRjaGVzU2VsZWN0b3IiLCJmaWx0ZXJET01Ob2RlcyIsImRvbUVsZW1lbnRzIiwiZG9tRWxlbWVudHNXaXRoRWxlbWVudHMiLCJkb21FbGVtZW50IiwiX19lbGVtZW50X18iLCJ1bmRlZmluZWQiLCJlbGVtZW50cyIsIm1hcCIsImRvbU5vZGUiLCJoZWlnaHQiLCJhc2NlbmRhbnRET01Ob2RlcyIsInBhcmVudERPTU5vZGUiLCJwYXJlbnRFbGVtZW50IiwicHVzaCIsImRlcHRoIiwiZGVzY2VuZGFudERPTU5vZGVzIiwiY2hpbGRET01Ob2RlcyIsImNoaWxkTm9kZXMiLCJmb3JFYWNoIiwiY2hpbGRET01Ob2RlIiwiZG9tTm9kZXMiLCJzZWxlY3RvciIsImZpbHRlcmVkRE9NTm9kZXMiLCJkb21Ob2RlVHlwZSIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsIm1hdGNoZXMiLCJURVhUX05PREUiLCJ0ZXN0IiwiZG9tTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJpbmRleCIsInJlc3VsdCJdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBWTs7OztRQUtJQSx1QkFBdUIsR0FBdkJBLHVCQUF1QjtRQU92QkMsNEJBQTRCLEdBQTVCQSw0QkFBNEI7UUFnQjVCQyw2QkFBNkIsR0FBN0JBLDZCQUE2QjtRQWM3QkMsd0JBQXdCLEdBQXhCQSx3QkFBd0I7UUFNeEJDLHNCQUFzQixHQUF0QkEsc0JBQXNCO1FBb0J0QkMsY0FBYyxHQUFkQSxjQUFjO0FBbEVULEdBQW9CLENBQXBCLE1BQW9CO0FBQ2hCLEdBQWMsQ0FBZCxVQUFjO1NBRXZCTCx1QkFBdUIsQ0FBQ00sV0FBVyxFQUFFLENBQUM7SUFDcEQsR0FBSyxDQUFDQyx1QkFBdUIsR0FBR0YsY0FBYyxDQUFDQyxXQUFXLEVBQUUsUUFBUSxDQUFQRSxVQUFVO1FBQUssTUFBTSxDQUFMQSxVQUFVLENBQUNDLFdBQVcsS0FBS0MsU0FBUztRQUMzR0MsUUFBUSxHQUFHSix1QkFBdUIsQ0FBQ0ssR0FBRyxDQUFDLFFBQVEsQ0FBUEosVUFBVTtRQUFLQSxNQUFNLENBQU5BLFVBQVUsQ0FBQ0MsV0FBVzs7SUFFbkYsTUFBTSxDQUFDRSxRQUFRO0FBQ2pCLENBQUM7U0FFZVYsNEJBQTRCLENBQUNZLE9BQU8sRUFBRUMsTUFBTSxFQUEwQixDQUFDO1FBQXpCQyxpQkFBaUIsb0VBQUcsQ0FBQyxDQUFDO0lBQ2xGLEVBQUUsRUFBRUQsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ2YsR0FBSyxDQUFDRSxhQUFhLEdBQUdILE9BQU8sQ0FBQ0ksYUFBYSxDQUFHLENBQUcsQUFBSCxFQUFHLEFBQUgsQ0FBRztRQUVqRCxFQUFFLEVBQUVELGFBQWEsS0FBSyxJQUFJLEVBQUUsQ0FBQztZQUMzQkQsaUJBQWlCLENBQUNHLElBQUksQ0FBQ0YsYUFBYTtZQUVwQ0YsTUFBTTtZQUVOYiw0QkFB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